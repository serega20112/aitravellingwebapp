# Работа с репозиторием

## Бранч-стратегия
- main — стабильная ветка, только через PR и ревью.
- develop — активная разработка (если используется).
- feature/* — фичи и крупные изменения.
- fix/* — багфиксы.

## Коммиты
- Пишите информативные сообщения, в повелительном наклонении: "Добавить …", "Исправить …".
- Группируйте связанные правки в один коммит.

## Pull Requests
- Небольшие и частые PR проще ревьюить.
- Описание: что изменилось, почему, как тестировалось.
- Убедитесь, что CI (линт/тесты) зелёный.

## Линтеры и форматирование
Устанавливаем линтеры/форматтеры:
```
pip install -r requirements.lint.txt
```
Запуск:
- Black (форматирование):
```
black src/ tests/ 
```
- Isort (сортировка импортов):
```
isort src/ tests/
```
- Flake8 (линт):
```
flake8 src/ tests/
```
- Ruff (быстрый линтер):
```
ruff check src/ tests/
```

(Опционально) можно собрать команды в Makefile/PowerShell-скрипт.

## Тесты
```
pytest -q
```
Структура тестов:
- tests/unit — юнит-тесты с моками портов и DummyUoW
- tests/integration — интеграционные тесты (Flask test client)

## Версионирование зависимостей
- Разделяем dev и lint зависимости: `requirements.dev.txt`, `requirements.lint.txt`.
- PyTorch (torch) не фиксируем — ставим отдельно в зависимости от платформы (см. docs/setup.md).

## CI/CD (рекомендации)
- Github Actions: job’ы на lint, test, build.
- Кэширование виртуального окружения по хешу файлов requirements.*.
- Артефакты: coverage report (pytest-cov), лог-репорты.
